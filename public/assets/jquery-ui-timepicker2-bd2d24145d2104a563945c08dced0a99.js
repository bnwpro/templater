!function(t){function e(){}t.extend(t.datepicker._defaults,{time24h:!1,showTime:!1,altTimeField:""}),t.datepicker._connectDatepickerOverride=t.datepicker._connectDatepicker,t.datepicker._connectDatepicker=function(e,i){t.datepicker._connectDatepickerOverride(e,i),this._get(i,"showTime")&&(i.settings.showButtonPanel=!0);var a=this._get(i,"showOn");("button"==a||"both"==a)&&(i.trigger.unbind("click"),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput==e?t.datepicker._hideDatepicker(null):t.datepicker._showDatepicker(e),!1}))},t.datepicker._showDatepickerOverride=t.datepicker._showDatepicker,t.datepicker._showDatepicker=function(e){if(t.datepicker._showDatepickerOverride(e),e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)){var i=t.datepicker._getInst(e),a=t.datepicker._get(i,"showTime");a&&t.timepicker.show(e)}},t.datepicker._checkExternalClickOverride=t.datepicker._checkExternalClick,t.datepicker._checkExternalClick=function(e){if(t.datepicker._curInst){var i=t(e.target);0==i.parents("#"+t.timepicker._mainDivId).length&&t.datepicker._checkExternalClickOverride(e)}},t.datepicker._hideDatepickerOverride=t.datepicker._hideDatepicker,t.datepicker._hideDatepicker=function(e,i){var a=this._curInst;if(a&&(!e||a==t.data(e,PROP_NAME))){var r=this._get(a,"showTime");void 0===e&&r&&(a.input&&(a.input.val(this._formatDate(a)),a.input.trigger("change")),this._updateAlternate(a),r&&t.timepicker.update(this._formatDate(a))),t.datepicker._hideDatepickerOverride(e,i),r&&t.timepicker.hide()}},t.datepicker._selectDate=function(e,i){var a=t(e),r=this._getInst(a[0]),s=this._get(r,"showTime");i=null!=i?i:this._formatDate(r),s||(r.input&&r.input.val(i),this._updateAlternate(r));var d=this._get(r,"onSelect");d?d.apply(r.input?r.input[0]:null,[i,r]):r.input&&!s&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):r.stayOpen||(s?this._updateDatepicker(r):(this._hideDatepicker(null,this._get(r,"duration")),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input[0].focus(),this._lastInput=null))},t.datepicker._updateDatepickerOverride=t.datepicker._updateDatepicker,t.datepicker._updateDatepicker=function(e){t.datepicker._updateDatepickerOverride(e),t.timepicker.resize()},e.prototype={init:function(){this._mainDivId="ui-timepicker-div",this._inputId=null,this._orgValue=null,this._orgHour=null,this._orgMinute=null,this._colonPos=-1,this._visible=!1,this.tpDiv=t('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style="width:30em; display: none; position: absolute;"></div>'),this._generateHtml(),t("#ui-datepicker-div").css("height","20em")},show:function(e){var i=t.datepicker._getInst(e);this._time24h=t.datepicker._get(i,"time24h"),this._altTimeField=t.datepicker._get(i,"altTimeField"),this._inputId=e.id,this._visible||(this._parseTime(),this._orgValue=t("#"+this._inputId).val()),this.resize(),t("#"+this._mainDivId).show(),this._visible=!0;var a=t("#"+t.datepicker._mainDivId),r=a.position(),s=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+t(document).scrollLeft(),d=this.tpDiv.offset().left+this.tpDiv.outerWidth();d>s&&(a.css("left",r.left-(d-s)-5),this.tpDiv.css("left",a.offset().left+a.outerWidth()+"px"))},update:function(e){var i=t("#"+this._mainDivId+" span.fragHours").text()+":"+t("#"+this._mainDivId+" span.fragMinutes").text();this._time24h||(i+=" "+t("#"+this._mainDivId+" span.fragAmpm").text());t("#"+this._inputId).val();t("#"+this._inputId).val(e+" "+i),this._altTimeField&&t(this._altTimeField).each(function(){t(this).val(i)})},hide:function(){this._visible=!1,t("#"+this._mainDivId).hide()},resize:function(){var e=t("#"+t.datepicker._mainDivId),i=e.position(),a=t("#"+t.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();t("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",a),this.tpDiv.css({height:e.height(),top:i.top,left:i.left+e.outerWidth()-1+"px"})},_generateHtml:function(){var e="";e+='<style type="text/css">',e+="table.ui-timepicker a {text-align:center}",e+=".ui-datepicker table.ui-timepicker th {text-align:left}",e+=".ui-datepicker table.ui-timepicker td {width:7%}",e+="#ui-datepicker-div button.ui-datepicker-close {display:none}",e+="</style>",e+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">',e+='<div class="ui-datepicker-title" style="margin:0">',e+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div>',e+='<table class="ui-timepicker"><tbody>',e+='<tr><td colspan="13">&nbsp;</td></tr>',e+='<tr><th>Hour</th><td><a href="#">12</a></td><td><a href="#">01</a></td><td><a href="#">02</a></td><td><a href="#">03</a></td><td><a href="#">04</a></td><td><a href="#">05</a></td><td><a href="#">06</a></td><td><a href="#">07</a></td><td><a href="#">08</a></td><td><a href="#">09</a></td><td><a href="#">10</a></td><td><a href="#">11</a></td></tr>',e+='<tr><th>Minutes</th><td><a href="#">00</a></td><td><a href="#">05</a></td><td><a href="#">10</a></td><td><a href="#">15</a></td><td><a href="#">20</a></td><td><a href="#">25</a></td><td><a href="#">30</a></td><td><a href="#">35</a></td><td><a href="#">40</a></td><td><a href="#">45</a></td><td><a href="#">50</a></td><td><a href="#">55</a></td></tr>',e+='<tr><th>&nbsp;</th><td colspan="12"><div id="minuteSlider" class="slider"></div></td></tr>',e+='<tr><th>&nbsp;</th><td><a id="ui-timepicker-am" href="#" type="hour">A.M</a></td><td><a id="ui-timepicker-pm" href="#" type="hour">P.M</a></td></tr>',e+="</tbody></table>",e+='<div style="width:97%;position:absolute;left:1%;bottom:0" class="ui-datepicker-buttonpane ui-widget-content">',e+='<button class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();" type="button">Done</button>',e+="</div>",this.tpDiv.empty().append(e),t("body").append(this.tpDiv),t("#minuteSlider").slider({orientation:"horizontal",range:"min",min:0,max:59,step:1,slide:function(t,e){a._setTime("minute",e.value)},stop:function(){t("#"+a._inputId).focus()}}),t("#minuteSlider > a").css("padding",0);var i=function(e,i){t(e).each(function(){var e=t(this),r=parseInt(e.text().replace(/^0|:/,""));12==r&&(r=0),e.attr("type",i),e.attr("time",r),e.bind("click",function(){var e=parseInt(t(this).attr("time")),i=t(this).attr("type");"hour"==i&&t("#ui-timepicker-pm").hasClass("ui-state-active")&&(e+=12),a._setTime(i,e)})})};t("table.ui-timepicker a").addClass("ui-state-default"),i("table.ui-timepicker tr:nth-child(2) a","hour"),i("table.ui-timepicker tr:nth-child(3) a","minute"),t("#ui-timepicker-am").click(function(){a._setTime("hour",parseInt(t("#"+a._mainDivId+" span.fragHours").text()))}),t("#ui-timepicker-pm").click(function(){var e=parseInt(t("#"+a._mainDivId+" span.fragHours").text());e>=12&&(e-=12),a._setTime("hour",e+12)});var a=this},_writeTime:function(e,i){"hour"==e&&(this._time24h?t("#"+this._mainDivId+" span.fragAmpm").text(""):(12>i?t("#"+this._mainDivId+" span.fragAmpm").text("am"):(t("#"+this._mainDivId+" span.fragAmpm").text("pm"),i-=12),0==i&&(i=12)),10>i&&(i="0"+i),t("#"+this._mainDivId+" span.fragHours").text(i)),"minute"==e&&(10>i&&(i="0"+i),t("#"+this._mainDivId+" span.fragMinutes").text(i))},_parseTime:function(){var e=t("#"+this._inputId).val();this._colonPos=e.search(":");var i=0,a=0,r="";-1!=this._colonPos&&(a=parseInt(e.substr(this._colonPos-2,2),10),i=parseInt(e.substr(this._colonPos+1,2),10),r=jQuery.trim(e.substr(this._colonPos+3,3))),r=r.toLowerCase(),"am"!=r&&"pm"!=r&&(r=""),0>a&&(a=0),0>i&&(i=0),a>23&&(a=23),i>59&&(i=59),"pm"==r&&12>a&&(a+=12),"am"==r&&12==a&&(a=0),this._setTime("hour",a),this._setTime("minute",i),this._orgHour=a,this._orgMinute=i},_setTime:function(e,i){isNaN(i)&&(i=0),0>i&&(i=0),i>23&&"hour"==e&&(i=23),i>59&&"minute"==e&&(i=59),t("table.ui-timepicker td a[type="+e+"]").removeClass("ui-state-active");var a=i;"hour"==e&&(12>i?t("#ui-timepicker-am").addClass("ui-state-active"):(t("#ui-timepicker-pm").addClass("ui-state-active"),a-=12)),t("table.ui-timepicker td a[time="+a+"][type="+e+"]").addClass("ui-state-active"),"minute"==e&&t("#minuteSlider").slider("value",i),this._writeTime(e,i)}},t.timepicker=new e,t("document").ready(function(){t.timepicker.init()})}(jQuery);